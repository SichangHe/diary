<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>mdbook-katex - StevenHe&#x27;s diary</title>


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->

        <!-- MathJax -->
        <script async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    </head>
    <body>
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var html = document.querySelector('html');
            var sidebar = null;
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="start.html"><strong aria-hidden="true">1.</strong> start</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="vscodium.html"><strong aria-hidden="true">1.1.</strong> VSCodium</a></li><li class="chapter-item expanded "><a href="the_run.html"><strong aria-hidden="true">1.2.</strong> The Run</a></li><li class="chapter-item expanded "><a href="feeling_lost.html"><strong aria-hidden="true">1.3.</strong> Feeling Lost</a></li><li class="chapter-item expanded "><a href="linux_vm_and_neovim.html"><strong aria-hidden="true">1.4.</strong> Linux VM and Neovim</a></li></ol></li><li class="chapter-item expanded "><a href="back_from_duke.html"><strong aria-hidden="true">2.</strong> Back from Duke</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="elixir_phoenix.html"><strong aria-hidden="true">2.1.</strong> Elixir Phoenix</a></li><li class="chapter-item expanded "><a href="mdbook_katex.html" class="active"><strong aria-hidden="true">2.2.</strong> mdbook-katex</a></li></ol></li><li class="chapter-item expanded "><a href="spring_2024_ideas.html"><strong aria-hidden="true">3.</strong> Spring 2024 Ideas</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="spring_2024_ideas/rethinking_the_web.html"><strong aria-hidden="true">3.1.</strong> Rethinking The Web</a></li><li class="chapter-item expanded "><a href="spring_2024_ideas/rust.html"><strong aria-hidden="true">3.2.</strong> Rust</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">StevenHe&#x27;s diary</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/SichangHe/diary" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="mdbook-katex"><a class="header" href="#mdbook-katex"><code>mdbook-katex</code></a></h1>
<p>20230315</p>
<h2 id="what-and-why-i-use-it"><a class="header" href="#what-and-why-i-use-it">What and why I use it</a></h2>
<p>As I progressed in developing the 2022 DKU iGEM Wiki using mdBook,
I realized that the iGEM competition requires that all content be hosted on
iGEM,
so using MathJax from a CDN was technically against the rules.
Instead of hosting a MathJax ourselves,
I tended to another option I foundâ€”compiling math expressions into HTML
using KaTex, provided by mdBook plugin <code>mdbook-katex</code>.
Previously, my notes have already being using it,
so I was confident that it works well.</p>
<p>Advantages above MathJax:</p>
<ul>
<li>No need to write weird <code>\\(</code> delimiters, just use <code>$</code> and <code>$$</code>.</li>
<li>Page load is fast.</li>
<li>No jumping around when reloading when doing <code>mdbook serve</code>.</li>
</ul>
<h2 id="the-project-was-in-a-bad-condition"><a class="header" href="#the-project-was-in-a-bad-condition">The project was in a bad condition</a></h2>
<p>It was November 2022, the owner of <code>mdbook-katex</code>, lzanini,
had not made any updates on the project for a year.</p>
<p>The last stable release it has was 0.2.10,
the CI started failing after that and never got fixed.
Despite that, another contributor, Matthewacon, added many features.
Therefore, the README suggested users to install <code>mdbook-katex</code> via
Cargo and Git:</p>
<pre><code class="language-shell">cargo install --git &quot;https://github.com/lzanini/mdbook-katex&quot;
</code></pre>
<p>There were also several very old issues lying there,
such as math blocks breaking tables and code blocks.
Pull requests were made, but they got no response neither.</p>
<p>The option <code>static-css</code> was extremely slow for me,
taking around 20 seconds on my slow network.
I later would find out that I was downloading all the fonts twice
every time the book gets rebuilt.</p>
<p>I posted an issue asking whether the repo was being maintained.
That issue got no response.</p>
<h2 id="mdbook-katex2"><a class="header" href="#mdbook-katex2"><code>mdbook-katex2</code></a></h2>
<p>I decided that I should fork the project and maintain it myself because I
relied on it.</p>
<p>An issue with a simple fork would be that I could not <code>cargo install</code> it.
Cargo has a &quot;first come first server&quot; policy so that new packages can never
take old packages' name.
I still wanted to have my fork on crates.io so I changed the package name to
<code>mdbook-katex2</code>.</p>
<p>I did many tries to fix the CI on my fork,
creating an array of &quot;CI failed&quot; message in my mailbox,
and eventually got the CI to pass.</p>
<p>I published the crate and people could install it using just Cargo and no Git.
So, I opened <a href="https://github.com/lzanini/mdbook-katex/issues/37">an issue introducing <code>mdbook-katex2</code> and thanking the original
author</a>.</p>
<p>To my surprise, that issue lead to a speedy response from lzanini.
The original author offered to add me as a collaborator so I can maintain the
original repository.
They argued that it would be more convenient for the users.</p>
<p>It turned out quite well, in my opinion.
I accepted the collaborator invitation and started to maintain <code>mdbook-katex</code>.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="elixir_phoenix.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next" href="spring_2024_ideas.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="elixir_phoenix.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next" href="spring_2024_ideas.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js"></script>
        <script src="mark.min.js"></script>
        <script src="searcher.js"></script>

        <script src="clipboard.min.js"></script>
        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS scripts -->


    </div>
    </body>
</html>
